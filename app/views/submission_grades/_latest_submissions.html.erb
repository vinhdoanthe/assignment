<% unless smart_listing.empty? %>
  <p id="notice"><%= notice %></p>
  <h1>Submissions</h1>
  <table class="table table-stripped table-hover">
    <thead>
    <tr>
      <th>Assignment</th>
      <th>Student</th>
      <th><%= smart_listing.sortable "Status", :submission_status %></th>
      <th>Submission file</th>
      <th>Attempt count</th>
      <th>Latest</th>
      <th>Mentor</th>
      <th>Graded rubric</th>
      <th>Graded file</th>
      <th>Point</th>
      <th colspan="3"></th>
    </tr>
    </thead>

    <tbody>
    <% smart_listing.collection.each do |submission_grade| %>
      <tr>
        <td><%= submission_grade.assignment.name %></td>
        <td><%= submission_grade.student.email %></td>
        <td><%= submission_grade.submission_status %></td>
        <td>
          <% if submission_grade.submission_file.attached? %>
            <%= link_to "Submission File", rails_blob_path(submission_grade.submission_file, disposition: "attachment") %>
          <% else %>
          <% end %>
        </td>
        <td><%= submission_grade.attempt_count %></td>
        <td><%= submission_grade.latest %></td>
<!--        <td><%#= best_in_place submission_grade, submission_grade.mentor.nil? ? "" : submission_grade.mentor.email, :as => :input %></td>-->
        <td><%= best_in_place submission_grade, :mentor_id, :as => :input %></td>
        <td><%= submission_grade.graded_rubric %></td>
        <td>
          <% if submission_grade.graded_file.attached? %>
            <%= link_to "Graded File", rails_blob_path(submission_grade.graded_file, disposition: "attachment") %>
          <% else %>
          <% end %>
        </td>
        <td><%= submission_grade.point %></td>
        <td><%= link_to 'Assign Mentor' %></td>
        <td><%= link_to 'Show', submission_grade %></td>
        <td><%= link_to 'Edit', edit_submission_grade_path(submission_grade) %></td>
        <!--        <td><%#= link_to 'Destroy', submission_grade, method: :delete, data: {confirm: 'Are you sure?'} %></td>-->
      </tr>
    <% end %>
    </tbody>
  </table>
  <%= smart_listing.paginate %>
<% else %>
  <p>No records!</p>
<% end %>